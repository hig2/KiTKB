function ajaxGet(e,t){var o=t||function(e){},a=new XMLHttpRequest;a.open("GET",e,!0),a.onreadystatechange=function(){if(console.log("Состояние: "+this.readyState+" / Код: "+this.status),200===this.status){if(console.log("Установлено соединение, ждем ответ"),4!=this.readyState)return;console.log("Ответ получен!"),o(a.responseText)}else{if(4!=this.readyState)return;console.log("Ошибка")}},a.send()}document.addEventListener("DOMContentLoaded",function(){function e(){u+=n,s=Math.floor(u/n)/10,Math.round(s)==s&&(s+=".0"),ajaxGet("/data",function(e){a=JSON.parse(e)});var t=(new Date).getTime()-r-u;window.setTimeout(e,n-t)}var t,o={name:"",pauseId:0,pauseNum:1,pause_0:[0,0],pause_1:[0,0],pause_2:[0,0],pause_3:[0,0],pause_4:[0,0],pause_5:[0,0],lastTime:0,dotNum:1,dot_0:0,dot_1:0,dot_2:0},t={SSDP:"0",ssid:"0",ssidPass:"0",ip:"0",ssidAP:"0",ssidApPass:"0",ddns:"0",ddnsName:"0",ddnsPort:0,mqttServer:"0",mqttPort:0,mqttUser:"0",mqttPass:"0"},a={temp:0};setTimeout(function(){document.querySelector(".container").style.opacity="1"},500),ajaxGet("/config.json",function(o){t=JSON.parse(o),window.setTimeout(e,n)});var r=(new Date).getTime(),u=0,s="0.0",n=1e3;document.querySelector(".wifiForm").addEventListener("submit",function(e){var t=document;console.log("Отправка формы ...."),e.preventDefault();var o=t.querySelector("#password").value,a=t.querySelector("#ssid").value;if(o=encodeURIComponent(o),a=encodeURIComponent(a),""==o||""==a)return console.log("Ошибка: отправлена пустая форма!");ajaxGet("/ssid?ssid="+a+"&password="+o,function(e){console.log("Ответ от сервера: "+e)})}),document.querySelector(".jorForm").onsubmit=function(e){var t=document;console.log("Отправка формы ...."),e.preventDefault(),o.pauseId=t.querySelector(".jorTopUl .active").getAttribute("data-liJornal"),o.name=t.querySelector(".jorLiName").value,o.pauseNum=t.querySelector(".pauseSelect").value;for(var a=t.querySelectorAll(".pause"),r=0;r<6;r++){var u=a[r].querySelector(".pauseTemp").value,s=a[r].querySelector(".pauseTime").value;u=Number(u),s=Number(s);for(var n in o)u>0&&s>0?(o["pause_"+r][0]=u,o["pause_"+r][1]=s):(o["pause_"+r][0]=0,o["pause_"+r][1]=0)}o.lastTime=t.querySelector(".twoPauseSelect .pauseTime").value,o.dotNum=t.querySelector(".timeSelect").value;for(var l=t.querySelectorAll(".twoPauseSelect .time"),r=0;r<3;r++){var s=l[r].querySelector(".pauseTime").value;s=Number(s);for(var n in o)o["dot_"+r]=s>0?s:0}console.log(o);var c=JSON.stringify(o);c="/jornal?pauseId="+c,console.log(c),ajaxGet(c,function(e){console.log("Ответ от сервера: "+e)})}}),document.addEventListener("DOMContentLoaded",function(){function e(e){for(var t=document.getElementsByClassName("sidebarButton"),o=0;o<t.length;o++)t[o].classList.remove("active");e.target.classList.add("active"),r=e.target.getAttribute("data-tab"),u=document.getElementsByClassName("cont");for(var o=0;o<u.length;o++)u[o].style.display=o==r?"block":"none"}function t(e){var t=e.target.getAttribute("data-liJornal");if(null!=t)for(var o=document.getElementsByClassName("jorTopLi"),a=0;a<o.length;a++)a==t?(o[a].classList.add("active"),document.querySelector(".jorInfo").style.display="none",document.querySelector(".jorForm").style.display="inline-flex"):o[a].classList.remove("active")}function o(){for(var e=document.querySelector(".pauseSelect").selectedIndex,t=document.querySelectorAll(".pause"),o=0;o<t.length;o++)o<=e?(t[o].querySelector(".pauseTemp").removeAttribute("disabled"),t[o].querySelector(".pauseTime").removeAttribute("disabled")):(t[o].querySelector(".pauseTemp").setAttribute("disabled",""),t[o].querySelector(".pauseTime").setAttribute("disabled",""),t[o].querySelector(".pauseTemp").value="",t[o].querySelector(".pauseTime").value="")}function a(){for(var e=document.querySelector(".timeSelect").selectedIndex,t=document.querySelectorAll(".time"),o=0;o<t.length;o++)o<=e?t[o].querySelector(".pauseTime").removeAttribute("disabled"):(t[o].querySelector(".pauseTime").setAttribute("disabled",""),t[o].querySelector(".pauseTime").value="")}for(var r=document.querySelector(".active").getAttribute("data-tab"),u=document.getElementsByClassName("cont"),s=0;s<u.length;s++)u[s].style.display=s==r?"block":"none";document.querySelector(".sidebarUl").addEventListener("click",e),document.querySelector(".jorTopUl").addEventListener("click",t),document.querySelector(".pauseSelect").addEventListener("change",o),document.querySelector(".timeSelect").addEventListener("change",a)});